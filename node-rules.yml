groups:
- name: Node.Rules
  rules:
  - alert: NodeCPUUsage
    expr: (100 - (avg by (instance) (irate(node_cpu{name="node-exporter",mode="idle"}[5m])) * 100)) > 75
    for: 1m
    labels: 
      severity: warning
    annotations:
      title: High CPU usage detected
      description: CPU usage is above 75% (current value is {{ $value }})
  - alert: NodeDiskRunningFull
    annotations:
      message: Device {{ $labels.device }} Mountpoint {{ $labels.mountpoint }} have low free space - {{ $value }}
    expr: node_filesystem_free_bytes/node_filesystem_size_bytes*100 < 30
    for: 30m
    labels:
      severity: warning

